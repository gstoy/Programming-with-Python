<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Събития на клавиатурата &#8212; Textual Programming in Python</title>
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/activecode.css" />
    <link rel="stylesheet" type="text/css" href="../_static/codemirror.css" />
    <link rel="stylesheet" type="text/css" href="../_static/clickable.css" />
    <link rel="stylesheet" type="text/css" href="../_static/pytutor.css" />
    <link rel="stylesheet" type="text/css" href="../_static/modal-basic.css" />
    <link rel="stylesheet" type="text/css" href="../_static/datafile.css" />
    <link rel="stylesheet" type="text/css" href="../_static/dragndrop.css" />
    <link rel="stylesheet" type="text/css" href="../_static/fitb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/matrixeq.css" />
    <link rel="stylesheet" type="text/css" href="../_static/parsons.css" />
    <link rel="stylesheet" type="text/css" href="../_static/lib/prettify.css" />
    <link rel="stylesheet" type="text/css" href="../_static/poll.css" />
    <link rel="stylesheet" type="text/css" href="../_static/showEval.css" />
    <link rel="stylesheet" type="text/css" href="../_static/tabbedstuff.css" />
    <link rel="stylesheet" type="text/css" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="../_static/video.css" />
    <link rel="stylesheet" type="text/css" href="../_static/karel.css" />
    <link rel="stylesheet" type="text/css" href="../_static/notes.css" />
    <link rel="stylesheet" href="../_static/user-highlights.css" type="text/css" />
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.1/css/all.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-4.0.0-dist/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/flatly.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/petlja.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/runestonebase.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <script type="text/javascript" src="../_static/jquery.highlight.js"></script>
    <script type="text/javascript" src="../_static/bookfuncs.js"></script>
    <script type="text/javascript" src="../_static/codemirror.js"></script>
    <script type="text/javascript" src="../_static/xml.js"></script>
    <script type="text/javascript" src="../_static/css.js"></script>
    <script type="text/javascript" src="../_static/python.js"></script>
    <script type="text/javascript" src="../_static/htmlmixed.js"></script>
    <script type="text/javascript" src="../_static/javascript.js"></script>
    <script type="text/javascript" src="../_static/jquery_i18n/CLDRPluralRuleParser.js"></script>
    <script type="text/javascript" src="../_static/jquery_i18n/jquery.i18n.js"></script>
    <script type="text/javascript" src="../_static/jquery_i18n/jquery.i18n.messagestore.js"></script>
    <script type="text/javascript" src="../_static/jquery_i18n/jquery.i18n.fallbacks.js"></script>
    <script type="text/javascript" src="../_static/jquery_i18n/jquery.i18n.language.js"></script>
    <script type="text/javascript" src="../_static/jquery_i18n/jquery.i18n.parser.js"></script>
    <script type="text/javascript" src="../_static/jquery_i18n/jquery.i18n.emitter.js"></script>
    <script type="text/javascript" src="../_static/jquery_i18n/jquery.i18n.emitter.bidi.js"></script>
    <script type="text/javascript" src="../_static/activecode-i18n.en.js"></script>
    <script type="text/javascript" src="../_static/skulpt.min.js"></script>
    <script type="text/javascript" src="../_static/skulpt-stdlib.js"></script>
    <script type="text/javascript" src="../_static/activecode.js"></script>
    <script type="text/javascript" src="../_static/clike.js"></script>
    <script type="text/javascript" src="../_static/timed_activecode.js"></script>
    <script type="text/javascript" src="../_static/animationbase.js"></script>
    <script type="text/javascript" src="../_static/mchoice.js"></script>
    <script type="text/javascript" src="../_static/timedmc.js"></script>
    <script type="text/javascript" src="../_static/timed.js"></script>
    <script type="text/javascript" src="../_static/mchoice-i18n.en.js"></script>
    <script type="text/javascript" src="../_static/clickable.js"></script>
    <script type="text/javascript" src="../_static/timedclickable.js"></script>
    <script type="text/javascript" src="../_static/d3.v2.min.js"></script>
    <script type="text/javascript" src="../_static/jquery.ba-bbq.min.js"></script>
    <script type="text/javascript" src="../_static/jquery.jsPlumb-1.3.10-all-min.js"></script>
    <script type="text/javascript" src="../_static/pytutor.js"></script>
    <script type="text/javascript" src="../_static/codelens.js"></script>
    <script type="text/javascript" src="../_static/datafile.js"></script>
    <script type="text/javascript" src="../_static/dragndrop.js"></script>
    <script type="text/javascript" src="../_static/timeddnd.js"></script>
    <script type="text/javascript" src="../_static/dragndrop-i18n.en.js"></script>
    <script type="text/javascript" src="../_static/fitb.js"></script>
    <script type="text/javascript" src="../_static/timedfitb.js"></script>
    <script type="text/javascript" src="../_static/fitb-i18n.en.js"></script>
    <script type="text/javascript" src="../_static/matrixeq.js"></script>
    <script type="text/javascript" src="../_static/lib/prettify.js"></script>
    <script type="text/javascript" src="../_static/lib/hammer.min.js"></script>
    <script type="text/javascript" src="../_static/parsons.js"></script>
    <script type="text/javascript" src="../_static/parsons-i18n.en.js"></script>
    <script type="text/javascript" src="../_static/timedparsons.js"></script>
    <script type="text/javascript" src="../_static/poll.js"></script>
    <script type="text/javascript" src="../_static/reveal.js"></script>
    <script type="text/javascript" src="../_static/shortanswer.js"></script>
    <script type="text/javascript" src="../_static/timed_shortanswer.js"></script>
    <script type="text/javascript" src="../_static/showEval.js"></script>
    <script type="text/javascript" src="../_static/tabbedstuff.js"></script>
    <script type="text/javascript" src="../_static/runestonevideo.js"></script>
    <script type="text/javascript" src="../_static/karelCorner.js"></script>
    <script type="text/javascript" src="../_static/karelRobot.js"></script>
    <script type="text/javascript" src="../_static/karelWorld.js"></script>
    <script type="text/javascript" src="../_static/karelRobotDrawer.js"></script>
    <script type="text/javascript" src="../_static/karelUI.js"></script>
    <script type="text/javascript" src="../_static/karel.js"></script>
    <script type="text/javascript" src="../_static/karel-i18n.en.js"></script>
    <script type="text/javascript" src="../_static/notes.js"></script>
    <script type="text/javascript" src="../_static/pygamelib-init.js"></script>
    <script type="text/javascript" src="../_static/blockly/blockly_compressed.js"></script>
    <script type="text/javascript" src="../_static/blockly/blocks_compressed.js"></script>
    <script type="text/javascript" src="../_static/blockly/python_compressed.js"></script>
    <script type="text/javascript" src="../_static/blockly/msg-sr.js"></script>
    <script type="text/javascript" src="../_static/blockpy/utilities.js"></script>
    <script type="text/javascript" src="../_static/blockpy/python_errors.js"></script>
    <script type="text/javascript" src="../_static/blockpy/ast_node_visitor.js"></script>
    <script type="text/javascript" src="../_static/blockpy/abstract_interpreter.js"></script>
    <script type="text/javascript" src="../_static/blockpy/pytifa.js"></script>
    <script type="text/javascript" src="../_static/blockpy/abstract_interpreter_definitions.js"></script>
    <script type="text/javascript" src="../_static/blockpy/python_to_blockly.js"></script>
    <script type="text/javascript" src="../_static/blockpy/imported.js"></script>
    <script type="text/javascript" src="../_static/blockpy/blocks/class.js"></script>
    <script type="text/javascript" src="../_static/blockpy/blocks/comment.js"></script>
    <script type="text/javascript" src="../_static/blockpy/blocks/comprehensions.js"></script>
    <script type="text/javascript" src="../_static/blockpy/blocks/dict.js"></script>
    <script type="text/javascript" src="../_static/blockpy/blocks/if.js"></script>
    <script type="text/javascript" src="../_static/blockpy/blocks/io.js"></script>
    <script type="text/javascript" src="../_static/blockpy/blocks/lists.js"></script>
    <script type="text/javascript" src="../_static/blockpy/blocks/sets.js"></script>
    <script type="text/javascript" src="../_static/blockpy/blocks/loops.js"></script>
    <script type="text/javascript" src="../_static/blockpy/blocks/parking.js"></script>
    <script type="text/javascript" src="../_static/blockpy/blocks/tuple.js"></script>
    <script type="text/javascript" src="../_static/blockpy/blocks/turtles.js"></script>
    <script type="text/javascript" src="../_static/blockpy/blocks/text.js"></script>
    <script type="text/javascript" src="../_static/blockpy-modal.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../_static/jquery-ui-1.10.3.custom.min.js"></script>
    <script type="text/javascript" src="../_static/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-4.0.0-dist/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-4.0.0-dist/js/bootstrap.bundle.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <script type="text/javascript" src="../_static/waypoints.min.js"></script>
    <script type="text/javascript" src="../_static/rangy-core.js"></script>
    <script type="text/javascript" src="../_static/rangy-textrange.js"></script>
    <script type="text/javascript" src="../_static/rangy-cssclassapplier.js"></script>
    <script type="text/javascript" src="../_static/user-highlights.js"></script>
    <script type="text/javascript" src="../_static/jquery.idle-timer.js"></script>
    <script type="text/javascript" src="../_static/processing-1.4.1.min.js"></script>
    <script type="text/javascript" src="../_static/jquery.hotkey.js"></script>
    <script type="text/javascript" src="../_static/jquery-migrate-1.2.1.min.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="Събития с мишка" href="03_PyGame_35_Interaction_EventMouse.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />
<link rel="shortcut icon" href="../_static/favicon.ico" type="image/ico" />

<script type="text/javascript">
  eBookConfig = {};
  eBookConfig.host = 'http://127.0.0.1:8000' ? 'http://127.0.0.1:8000' : 'http://127.0.0.1:8000';
  eBookConfig.app = eBookConfig.host+'/runestone';
  eBookConfig.ajaxURL = eBookConfig.app+'/ajax/';
  eBookConfig.course = 'TxtProgInPython';
  eBookConfig.logLevel = 0;
  eBookConfig.loginRequired = false;
  eBookConfig.build_info = "";
  eBookConfig.isLoggedIn = false;
  eBookConfig.useRunestoneServices = false;
  eBookConfig.python3 = true;
  eBookConfig.basecourse = 'TxtProgInPython';
  eBookConfig.runestone_version = '3.1.1';
  eBookConfig.imagesDir = '../_images/';
  eBookConfig.staticDir = '../_static/';
  if(typeof(Sk) != "undefined")
      Sk.imgPath = eBookConfig.imagesDir;
</script>

<div id="fb-root"></div>



  </head><body>


<!-- Begin navbar -->

<nav id="navbar" class="navbar navbar-default navbar-fixed-top" role="navigation">

  <div class="container">

    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
     <img src="../_static/img/logo.png" style="width:80px; height: 80px;"> 
    </div>

    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1" style="margin-top: 10px; margin-left: 25px;">
      <ul class="nav navbar-nav">
        <li class="active"><a href="../">Textual Programming in Python</a></li>
      </ul>
    </div>
  </div>
</nav>
<br/>


<div class="container col-md-12" id="continue-reading"></div>

<div class="container col-md-8 col-md-offset-2" id="main-content">
  
  <div class="section" id="id1">
<h1>Събития на клавиатурата<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h1>
<p>От генерираните от клавиатурата събития най-важно е събитието за натискане на клавиши, така че ние ще се съсредоточим върху това най-много. При натискане на клавиши на клавиатурата, в обекта <em>събитие</em>, който представлява събитие в нашите програми, стойността на <em>event.type</em> ще бъде <code class="docutils literal notranslate"><span class="pre">pg.KEYDOWN</span></code>.</p>
<p>Когато натискането на клавишен клавиш е регистрирано, почти винаги искаме да знаем кой клавиш е. Това можем да разберем, като тестваме стойността на <code class="docutils literal notranslate"><span class="pre">event.key</span></code>. Както вече споменахме в урока за четене на състоянието на клавиатурата, че за всеки клавиш има константа, съответстваща на този клавиш. Нека си припомним имената на тези константи за някои често тествани ключове (можете да видите пълен списък на тези константи <a class="reference external" href="https://www.pygame.org/docs/ref/key.html">тук</a> ):</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 46%" />
<col style="width: 54%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>constant</p></th>
<th class="head"><p>key</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>pg.K_LEFT</p></td>
<td><p>лява стрелка</p></td>
</tr>
<tr class="row-odd"><td><p>pg.K_RIGHT</p></td>
<td><p>дясна стрелка</p></td>
</tr>
<tr class="row-even"><td><p>pg.K_UP</p></td>
<td><p>стрелка нагоре</p></td>
</tr>
<tr class="row-odd"><td><p>pg.K_DOWN</p></td>
<td><p>стрелка надолу</p></td>
</tr>
<tr class="row-even"><td><p>pg.K_SPACE</p></td>
<td><p>разстояние</p></td>
</tr>
<tr class="row-odd"><td><p>pg.K_a</p></td>
<td><p>клавиш <em>a</em></p></td>
</tr>
<tr class="row-even"><td><p>pg.K_b</p></td>
<td><p>клавиш <em>b</em></p></td>
</tr>
<tr class="row-odd"><td><p>pg.K_c</p></td>
<td><p>клавиш <em>c</em></p></td>
</tr>
</tbody>
</table>
<p>Стойността на полето <em>event.key</em> ни казва кой физически клавиш е натиснат и тази стойност е подходяща за клавиши като клавиши със стрелки, <em>Ctrl</em>, <em>Shift</em>, <em>Alt</em>, <em>Home</em>, <em>End</em> и т.н. Що се отнася до текст, може да е по-удобно да се използва стойността на полето “event.unicode”, което съдържа символа, който току-що беше въведен (като един символен низ).</p>
<p>Следващият пример илюстрира тестване на натискане на клавиш или събитие <em>pg.KEYDOWN</em>.</p>

    <div class="course-box course-box-special">
        <div class="course-content">
            <h4 class="carbox-title">
                <img class="corner-image float-right" src="../_static/img/question-mark.png" />
            </h4>
            <p>
<p><strong>Пример - кръстословица</strong></p>
<p>В този пример потребителят може да използва клавишите със стрелки на клавиатурата, за да премества рамката и да въвежда букви в полета.</p>

    </p></div></div>
<p>Обърнете внимание на функцията <em>handle_event</em>, в която се извършва проверка на типа събитие, и след това, ако е натискане на клавиш, се проверява допълнителна информация за събитието, съхранявана в полетата <em>event.key</em> и <em>event.unicode</em>.</p>
<p>Освен това можете да опитате да съберете няколко интересни кръстословици.</p>

<div data-childcomponent="PyGame__interact_crossword" class="course-box course-box-problem course-content">

<textarea data-component="activecode" id=PyGame__interact_crossword data-lang="python" 
      data-timelimit=25000    
    data-audio=''   
              data-modaloutput="true" data-hidehistory=true
    data-includesrc="# -*- acsection: general-init -*-
import pygame as pg, pygamebg
num_rows, num_cols = 5, 5
a = 50 # square size
(width, height) = (a* num_cols, a * num_rows)
canvas = pygamebg.open_window(width, height, &quot;Crossword&quot;)

font = pg.font.SysFont(&quot;Arial&quot;, 30)
board = []
for row in range(num_rows):
    board.append([&apos; &apos;] * num_cols)
    
(frame_row, frame_col) = (0, 0)

# -*- acsection: main -*-
def handle_event(event):
    global frame_row, frame_col
    if event.type == pg.KEYDOWN:
        if event.key == pg.K_LEFT:
            if frame_col &gt; 0:
                frame_col -= 1
        elif event.key == pg.K_RIGHT:
            if frame_col &lt; num_cols-1:
                frame_col += 1
        elif event.key == pg.K_UP:
            if frame_row &gt; 0:
                frame_row -= 1
        elif event.key == pg.K_DOWN:
            if frame_row &lt; num_rows-1:
                frame_row += 1
        else:
            letter = chr(event.key).upper()
            if letter in &apos; ABCDEFGHIJKLMNOPQRSTUVWXYZ&apos;:
                board[frame_row][frame_col] = letter
# -*- acsection: after-main -*-

def display_letter(text, row, col):
    if text == &apos; &apos;:
        d = 6
        square = (a*col + d, a*row + d, a - 2*d, a - 2*d)
        pg.draw.rect(canvas, pg.Color(&quot;black&quot;), square)
    else:
        text_image = font.render(text, True, pg.Color(&quot;black&quot;))
        x = a * col + (a - text_image.get_width()) // 2
        y = a * row + (a - text_image.get_height()) // 2
        canvas.blit(text_image, (x, y))

def new_frame():
    canvas.fill(pg.Color(&quot;white&quot;))   # paint background
    for x in range(0, width+1, a): # vertical lines
        pg.draw.line(canvas, pg.Color(&quot;black&quot;), (x, 0), (x, height), 2)
    for y in range(0, height+1, a): # horizontal lines
        pg.draw.line(canvas, pg.Color(&quot;black&quot;), (0, y), (width, y), 2)

    pg.draw.rect(canvas, pg.Color(&quot;blue&quot;), (a*frame_col, a*frame_row, a, a), 4) # frame

    for row in range(num_rows): # letters
        for col in range(num_cols):
            display_letter(board[row][col], row, col)
            
pygamebg.frame_loop(30, new_frame, handle_event)
"   data-enablecopy="true">


</textarea>
</div>
<p>Нека сравним тази програма с програмата „Навигация“ от урока за четене на състоянието на клавиатурата:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 49%" />
<col style="width: 51%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>В програмата „Навигация“</p></th>
<th class="head"><p>В програмата „кръстословица“</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>жълтият кръг се движеше с един пиксел - плъзгайки се</p></td>
<td><p>рамката се движи с едно поле - скача</p></td>
</tr>
<tr class="row-odd"><td><p>нямахме точен контрол на това къде ще спре кръга</p></td>
<td><p>можем точно да контролираме къде ще спре рамката</p></td>
</tr>
<tr class="row-even"><td><p>няма значение къде точно ще спре кръга</p></td>
<td><p>има значение къде точно ще спре рамката</p></td>
</tr>
<tr class="row-odd"><td><p>четем състоянието на клавишите(надолу или нагоре)</p></td>
<td><p>използваме събитие (натискане на клавиш)</p></td>
</tr>
</tbody>
</table>

    <div class="course-box course-box-special">
        <div class="course-content">
            <h4 class="carbox-title">
                <img class="corner-image float-right" src="../_static/img/question-mark.png" />
            </h4>
            <p>
<p><strong>Задача - навигация през полета</strong></p>
<p>Напишете програма, която работи както е показано в примера (бутон „Play Task“).</p>
<p>Потребителят може да използва клавишите със стрелки на клавиатурата, за да ръководи символа, представен с жълт кръг. Героят се движи из полетата с бели точки.</p>

    </p></div></div>

<div data-childcomponent="PyGame__interact_pacman1" class="course-box course-box-problem course-content">

<textarea data-component="activecode" id=PyGame__interact_pacman1 data-lang="python" 
      data-timelimit=25000    
    data-audio=''   
           data-playtask="true"   data-modaloutput="true" data-hidehistory=true
     data-includehsrc="import pygame as pg, pygamebg
num_rows, num_cols = 10, 10
a = 50 # square size
(width, height) = (a* num_cols, a * num_rows)
canvas = pygamebg.open_window(width, height, &quot;Dot-eater&quot;)

(character_row, character_col) = (num_rows // 2, num_cols // 2)

def new_frame():
    canvas.fill(pg.Color(&quot;black&quot;))   # paint canvas

    # white dots
    for x in range(a // 2, width, a):
        for y in range(a // 2, height, a):
            pg.draw.circle(canvas, pg.Color(&quot;white&quot;), (x, y), 3)
   
    # draw dot-eater
    (x, y) = (character_col * a + a//2, character_row * a + a//2)
    pg.draw.circle(canvas, pg.Color(&apos;yellow&apos;), (x, y), a // 3)
    
def handle_event(event):
    global character_row, character_col
    if event.type == pg.KEYDOWN:
        if event.key == pg.K_LEFT and (character_col &gt; 0):
            character_col -= 1
        if event.key == pg.K_RIGHT and (character_col &lt; num_cols-1):
            character_col += 1
        if event.key == pg.K_UP and (character_row &gt; 0):
            character_row -= 1
        if event.key == pg.K_DOWN and (character_row &lt; num_rows-1):  
            character_row += 1

pygamebg.frame_loop(30, new_frame, handle_event)

"  data-enablecopy="true">
import pygame as pg, pygamebg
num_rows, num_cols = 10, 10
a = 50 # square size
(width, height) = (a* num_cols, a * num_rows)
canvas = pygamebg.open_window(width, height, "Dot-eater")

(character_row, character_col) = (num_rows // 2, num_cols // 2)

def new_frame():
    canvas.fill(pg.Color("black"))   # paint canvas

    # white dots
    for x in range(a // 2, width, a):
        for y in range(a // 2, height, a):
            pg.draw.circle(canvas, pg.Color("white"), (x, y), 3)

    # HERE ADD THE STATEMENTS FOR DRAWING THE YELLOW CIRCLE
    # (use character_row, character_col)

def handle_event(event):
    global character_row, character_col
    # ADD THE EVENT PROCESSING STATEMENTS HERE

pygamebg.frame_loop(30, new_frame, handle_event)
</textarea>
</div>

    <div class="course-box course-box-special">
        <div class="course-content">
            <h4 class="carbox-title">
                <img class="corner-image float-right" src="../_static/img/question-mark.png" />
            </h4>
            <p>
<p><strong>Задача - създаване на лабиринт</strong></p>
<p>Напишете програма, която прави лабиринт. Червената рамка трябва да се контролира с помощта на стрелките, а натискането на интервала трябва да промени цвета на квадрат (от черно до бяло и обратно).</p>

    </p></div></div>
<p>Когато приключите със задачата, опитайте следното:</p>
<ul class="simple">
<li><p>кликнете върху бутона „Play Task“ (този път примерната програма прави повече от това, което поискахме от вас)</p></li>
<li><p>направете лабиринта по желания от вас начин</p></li>
<li><p>натиснете <em>S</em> за старт и гледайте</p></li>
<li><p>натиснете <em>P</em>, за да включите и изключите режима на пауза, тоест да спрете или възобновите търсенето</p></li>
</ul>

<div data-childcomponent="PyGame__interact_labyrinth" class="course-box course-box-problem course-content">

<textarea data-component="activecode" id=PyGame__interact_labyrinth data-lang="python" 
      data-timelimit=25000    
    data-audio=''   
              data-modaloutput="true" data-hidehistory=true
     data-includehsrc="import pygame as pg, pygamebg, random
a = 50 # square size
num_rows = 12
num_cols = 20
(width, height) = (num_cols * a, num_rows * a)
canvas = pygamebg.open_window(width, height, &quot;Maze&quot;)

def draw():
    # draw empty board
    canvas.fill(pg.Color(&apos;white&apos;))
    for row in range(num_rows):
        for col in range(num_cols):
            if board[row][col] == -1: # wall
                pg.draw.rect(canvas, pg.Color(&apos;black&apos;), (col * a, row * a, a, a))
            elif board[row][col] == 1: # current path
                pg.draw.circle(canvas, pg.Color(&apos;gray&apos;), (col * a + a//2, row * a + a//2), 10)
            elif board[row][col] == 2: # were there and came back
                pg.draw.circle(canvas, pg.Color(&apos;black&apos;), (col * a + a//2, row * a + a//2), 10)
    
    if not searching:
        pg.draw.rect(canvas, pg.Color(&apos;red&apos;), (frame_col * a, frame_row * a, a, a), 3)
    

def new_frame():
    if searching and not paused:
        next(positions, 0)
    draw()
        
def handle_event(event):
    global paused, found, searching, positions, board, frame_row, frame_col
    if event.type == pg.KEYDOWN: # keystroke on the keyboard
        if event.key == pg.K_LEFT:
            if frame_col &gt; 0:
                frame_col -= 1
        elif event.key == pg.K_RIGHT:
            if frame_col &lt; num_cols-1:
                frame_col += 1
        elif event.key == pg.K_UP:
            if frame_row &gt; 0:
                frame_row -= 1
        elif event.key == pg.K_DOWN:
            if frame_row &lt; num_rows-1:
                frame_row += 1
        elif event.key == pg.K_SPACE:
            if (board[frame_row][frame_col] == 0) :
                board[frame_row][frame_col] = -1
            else: 
                board[frame_row][frame_col] = 0

        if chr(event.key) == &apos;s&apos;: # (re)start
            for row in range(num_rows):
                for col in range(num_cols):
                    if board[row][col] &gt; 0:
                        board[row][col] = 0
            searching = True
            found = False
            positions = seek(start[0], start[1]) # generator
        if chr(event.key) == &apos;p&apos;: # paused
            if searching:
                paused = not paused

def seek(x, y):
    global found
    if found: return
    if (x &lt; 0 or y &lt; 0 or x &gt;= num_cols or y &gt;= num_rows): return
    if (board[y][x] != 0): return

    board[y][x] = 1
    yield
    if (x, y) == target:
        found = True
        return

    yield from seek(x + 1, y)
    yield from seek(x - 1, y)
    yield from seek(x, y + 1)
    yield from seek(x, y - 1)

    if not found:
        board[y][x] = 2
        yield

FPS = 5
paused = False
start, target = (0,0), (num_cols-1, num_rows-1)
board = [[random.randint(-1, 0) for i in range(num_cols)]  for j in range(num_rows)]
(frame_row, frame_col) = (0, 0)
searching = False
found = False

pygamebg.frame_loop(FPS, new_frame, handle_event)
"  data-enablecopy="true">
import pygame as pg, pygamebg, random
a = 50 # square size
num_rows = 12
num_cols = 20
(width, height) = (num_cols * a, num_rows * a)
canvas = pygamebg.open_window(width, height, "Maze")

def new_frame():
    canvas.fill(pg.Color('white')) # paint background
    for row in range(num_rows):
        for col in range(num_cols):
            if board[row][col] == 1: # wall
                pg.draw.rect(canvas, pg.Color('black'), (col * a, row * a, a, a))

    # frame
    pg.draw.rect(canvas, pg.Color('red'), (frame_col * a, frame_row * a, a, a), 3)

def handle_event(event):
    global board, frame_row, frame_col

    # ADD STATEMENTS FOR KEYSTROKE PROCESSING HERE
    # (arrow keys and space bar should be covered)

board = []
for j in range(num_rows):
    board.append([])
    for i in range(num_cols):
        board[-1].append(random.randint(0, 1))

(frame_row, frame_col) = (0, 0)
pygamebg.frame_loop(10, new_frame, handle_event)
</textarea>
</div>
<div class="section" id="id2">
<h2>Бонус - програма за практика на машинопис<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<p>Програмата по-долу е предназначена за въвеждане на практика. Програмата е дълга, но трябва да можете да разберете голяма част от нея.</p>
<p>Може да искате (не е задължително) да приспособите програмата към вашите нужди, особено в началото. Например:</p>
<ul class="simple">
<li><p>да забави (или по-късно да ускори) падането на буквите</p></li>
<li><p>да не губите точки, когато направите грешка</p></li>
<li><p>когато овладеете буквите, които попадат първи, да ги премахнете от списъка с букви, които да практикувате</p></li>
<li><p>да промените набора от падащи символи само на числа и знаци за работа (ако искате да практикувате да пишете само на цифровата клавиатура от дясната страна)</p></li>
<li><p>за натискане на интервала изтрийте най-малката буква (с малко намаляване на резултата)</p></li>
</ul>
<p>или нещо друго, за което се сещате.</p>
<p>Когато имате време, вие се насърчавате да се опитате да получите максимално висока оценка (без мамене).</p>

<div data-childcomponent="PyGame__interact_typing_tutor" class="course-box course-box-problem course-content">

<textarea data-component="activecode" id=PyGame__interact_typing_tutor data-lang="python" 
      data-timelimit=25000    
    data-audio=''   
              data-modaloutput="true" data-hidehistory=true
    data-includesrc="import pygame as pg, pygamebg, random
(width, height) = (600, 400)
canvas = pygamebg.open_window(width, height, &quot;Typing - shooting&quot;)

def write(message, x, y):
    font = pg.font.SysFont(&quot;Arial&quot;, 32) # font for displaying the message
    text_image = font.render(message, True, pg.Color(&quot;green&quot;))
    canvas.blit(text_image, (x, y)) # display the image

def draw():
    canvas.fill(pg.Color(&quot;black&quot;))    # paint canvas
    if not game_over:
        # if the game is still running, 
        # display the falling letters and the number of points
        for letter, x, y in falling_letters:
            write(letter, x, y)
        write(&apos;score: &apos; + str(score), 0, height - 40)
    else:
        # otherwise write a message
        write(&apos;Game over&apos;, 100, 100)
        write(&apos;you scored &apos; + str(score) + &apos; points&apos;, 100, 200)

def new_frame():
    global falling_letters, time_until_next_letter, next_x
    global choice_starting_letter, letters_to_chose_from, game_over
    # move all falling letters two pixels down, check whether the game is still running
    new_letters = []
    for letter, x, y in falling_letters:
        if y &lt; height - 40: 
            new_letters.append((letter, x, y + 2))
        else:
            # if a letter has reached the bottom of the window, the game is over
            game_over = True 
            
    # update list of falling letters
    time_until_next_letter -= 1
    if time_until_next_letter &lt;= 0: # if another falling letter needs to be added...
        time_until_next_letter = 20
        next_x += 20
        if next_x &gt;= width:
            # row of letteres is filled, update letters to chose from
            next_x -= width
            if choice_starting_letter + NUM_LETTERS_TO_CHOSE_FROM &lt; len(letters):
                choice_starting_letter += 1
                letters_to_chose_from = letters[choice_starting_letter : choice_starting_letter + NUM_LETTERS_TO_CHOSE_FROM]
        # add one more falling letter
        letter = random.choice(letters_to_chose_from)
        new_letters.append((letter, next_x, 0))

    falling_letters = new_letters
    draw()
    
def handle_event(event):
    global falling_letters, score
    if event.type == pg.KEYDOWN: # keystroke on the keyboard
        key_typed = chr(event.key).upper()
        if len(falling_letters) &gt; 0: # if there are falling letters
            letter, x, y = falling_letters[0] # lowest falling letter
            if key_typed == letter:
                del falling_letters[0]
                score += 10 # reward for typing the lowest letter
            else:
                score -= 4  # penalty for the wrong letter
            
letters = &apos;ASDFJKL;EIRUTYGHWOQPC,VMBNXZ.-&apos;
NUM_LETTERS_TO_CHOSE_FROM = 4
choice_starting_letter = 0
letters_to_chose_from = letters[choice_starting_letter : choice_starting_letter + NUM_LETTERS_TO_CHOSE_FROM]
falling_letters = []
time_until_next_letter = 0
next_x = 0
score = 0
game_over = False

pygamebg.frame_loop(30, new_frame, handle_event)
"   data-enablecopy="true">


</textarea>
</div>
</div>
</div>


  
      <div class="col-md-12">
<ul class="pager">
        <li id="relations-prev" title='Previous chapter - Събития с мишка' data-toggle="tooltip"><a href="03_PyGame_35_Interaction_EventMouse.html">Previous chapter</a></li>
    
</ul>

<!-- <ul class="pager"> -->
    <!-- -->
        <!-- <li id="relations-prev" title='Претходно поглавље - Събития с мишка' data-toggle="tooltip"><a href="03_PyGame_35_Interaction_EventMouse.html">Претходно поглавље</a></li> -->
    <!--  -->
    <!-- -->
<!-- </ul> -->

<script type="text/javascript">

  $('#relations-prev').tooltip({'placement':'right', 'selector': '', 'delay': { show: 100, hide: 50}});
  $('#relations-next').tooltip({'placement':'left', 'selector': '', 'delay': { show: 100, hide: 50}});

</script>
</div>
  
</div>
<footer class="footer col-md-12">
    <div class="container text-center">
        <div class="text-center">
            <hr>
            <p class="text-muted">
                <span class="text-center">&copy; 2019 <a href="https://petlja.org">Petlja.org</a> 
                  <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="Creative Commons License" style="border-width:0; vertical-align: text-bottom" src="https://i.creativecommons.org/l/by-nc-sa/4.0/80x15.png" /></a>
                  (Created using  <a href="https://pypi.org/project/Sphinx/">Sphinx</a>, <a href="http://runestoneinteractive.org/">RunestoneComponents</a> and <a href="https://github.com/Petlja/PetljaDoc">PetljaDoc</a>)</span>
            </p>
        </div>
    </div>
</footer>



<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-32029811-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>



  </body>
</html>