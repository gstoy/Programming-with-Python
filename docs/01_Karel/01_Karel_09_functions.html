<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Създайте серия от оператори &#8212; Textual Programming in Python</title>
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/activecode.css" />
    <link rel="stylesheet" type="text/css" href="../_static/codemirror.css" />
    <link rel="stylesheet" type="text/css" href="../_static/clickable.css" />
    <link rel="stylesheet" type="text/css" href="../_static/pytutor.css" />
    <link rel="stylesheet" type="text/css" href="../_static/modal-basic.css" />
    <link rel="stylesheet" type="text/css" href="../_static/datafile.css" />
    <link rel="stylesheet" type="text/css" href="../_static/dragndrop.css" />
    <link rel="stylesheet" type="text/css" href="../_static/fitb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/matrixeq.css" />
    <link rel="stylesheet" type="text/css" href="../_static/parsons.css" />
    <link rel="stylesheet" type="text/css" href="../_static/lib/prettify.css" />
    <link rel="stylesheet" type="text/css" href="../_static/poll.css" />
    <link rel="stylesheet" type="text/css" href="../_static/showEval.css" />
    <link rel="stylesheet" type="text/css" href="../_static/tabbedstuff.css" />
    <link rel="stylesheet" type="text/css" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="../_static/video.css" />
    <link rel="stylesheet" type="text/css" href="../_static/karel.css" />
    <link rel="stylesheet" type="text/css" href="../_static/notes.css" />
    <link rel="stylesheet" href="../_static/user-highlights.css" type="text/css" />
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.1/css/all.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-4.0.0-dist/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/flatly.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/petlja.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/runestonebase.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <script type="text/javascript" src="../_static/jquery.highlight.js"></script>
    <script type="text/javascript" src="../_static/bookfuncs.js"></script>
    <script type="text/javascript" src="../_static/codemirror.js"></script>
    <script type="text/javascript" src="../_static/xml.js"></script>
    <script type="text/javascript" src="../_static/css.js"></script>
    <script type="text/javascript" src="../_static/python.js"></script>
    <script type="text/javascript" src="../_static/htmlmixed.js"></script>
    <script type="text/javascript" src="../_static/javascript.js"></script>
    <script type="text/javascript" src="../_static/jquery_i18n/CLDRPluralRuleParser.js"></script>
    <script type="text/javascript" src="../_static/jquery_i18n/jquery.i18n.js"></script>
    <script type="text/javascript" src="../_static/jquery_i18n/jquery.i18n.messagestore.js"></script>
    <script type="text/javascript" src="../_static/jquery_i18n/jquery.i18n.fallbacks.js"></script>
    <script type="text/javascript" src="../_static/jquery_i18n/jquery.i18n.language.js"></script>
    <script type="text/javascript" src="../_static/jquery_i18n/jquery.i18n.parser.js"></script>
    <script type="text/javascript" src="../_static/jquery_i18n/jquery.i18n.emitter.js"></script>
    <script type="text/javascript" src="../_static/jquery_i18n/jquery.i18n.emitter.bidi.js"></script>
    <script type="text/javascript" src="../_static/activecode-i18n.en.js"></script>
    <script type="text/javascript" src="../_static/skulpt.min.js"></script>
    <script type="text/javascript" src="../_static/skulpt-stdlib.js"></script>
    <script type="text/javascript" src="../_static/activecode.js"></script>
    <script type="text/javascript" src="../_static/clike.js"></script>
    <script type="text/javascript" src="../_static/timed_activecode.js"></script>
    <script type="text/javascript" src="../_static/animationbase.js"></script>
    <script type="text/javascript" src="../_static/mchoice.js"></script>
    <script type="text/javascript" src="../_static/timedmc.js"></script>
    <script type="text/javascript" src="../_static/timed.js"></script>
    <script type="text/javascript" src="../_static/mchoice-i18n.en.js"></script>
    <script type="text/javascript" src="../_static/clickable.js"></script>
    <script type="text/javascript" src="../_static/timedclickable.js"></script>
    <script type="text/javascript" src="../_static/d3.v2.min.js"></script>
    <script type="text/javascript" src="../_static/jquery.ba-bbq.min.js"></script>
    <script type="text/javascript" src="../_static/jquery.jsPlumb-1.3.10-all-min.js"></script>
    <script type="text/javascript" src="../_static/pytutor.js"></script>
    <script type="text/javascript" src="../_static/codelens.js"></script>
    <script type="text/javascript" src="../_static/datafile.js"></script>
    <script type="text/javascript" src="../_static/dragndrop.js"></script>
    <script type="text/javascript" src="../_static/timeddnd.js"></script>
    <script type="text/javascript" src="../_static/dragndrop-i18n.en.js"></script>
    <script type="text/javascript" src="../_static/fitb.js"></script>
    <script type="text/javascript" src="../_static/timedfitb.js"></script>
    <script type="text/javascript" src="../_static/fitb-i18n.en.js"></script>
    <script type="text/javascript" src="../_static/matrixeq.js"></script>
    <script type="text/javascript" src="../_static/lib/prettify.js"></script>
    <script type="text/javascript" src="../_static/lib/hammer.min.js"></script>
    <script type="text/javascript" src="../_static/parsons.js"></script>
    <script type="text/javascript" src="../_static/parsons-i18n.en.js"></script>
    <script type="text/javascript" src="../_static/timedparsons.js"></script>
    <script type="text/javascript" src="../_static/poll.js"></script>
    <script type="text/javascript" src="../_static/reveal.js"></script>
    <script type="text/javascript" src="../_static/shortanswer.js"></script>
    <script type="text/javascript" src="../_static/timed_shortanswer.js"></script>
    <script type="text/javascript" src="../_static/showEval.js"></script>
    <script type="text/javascript" src="../_static/tabbedstuff.js"></script>
    <script type="text/javascript" src="../_static/runestonevideo.js"></script>
    <script type="text/javascript" src="../_static/karelCorner.js"></script>
    <script type="text/javascript" src="../_static/karelRobot.js"></script>
    <script type="text/javascript" src="../_static/karelWorld.js"></script>
    <script type="text/javascript" src="../_static/karelRobotDrawer.js"></script>
    <script type="text/javascript" src="../_static/karelUI.js"></script>
    <script type="text/javascript" src="../_static/karel.js"></script>
    <script type="text/javascript" src="../_static/karel-i18n.en.js"></script>
    <script type="text/javascript" src="../_static/notes.js"></script>
    <script type="text/javascript" src="../_static/pygamelib-init.js"></script>
    <script type="text/javascript" src="../_static/blockly/blockly_compressed.js"></script>
    <script type="text/javascript" src="../_static/blockly/blocks_compressed.js"></script>
    <script type="text/javascript" src="../_static/blockly/python_compressed.js"></script>
    <script type="text/javascript" src="../_static/blockly/msg-sr.js"></script>
    <script type="text/javascript" src="../_static/blockpy/utilities.js"></script>
    <script type="text/javascript" src="../_static/blockpy/python_errors.js"></script>
    <script type="text/javascript" src="../_static/blockpy/ast_node_visitor.js"></script>
    <script type="text/javascript" src="../_static/blockpy/abstract_interpreter.js"></script>
    <script type="text/javascript" src="../_static/blockpy/pytifa.js"></script>
    <script type="text/javascript" src="../_static/blockpy/abstract_interpreter_definitions.js"></script>
    <script type="text/javascript" src="../_static/blockpy/python_to_blockly.js"></script>
    <script type="text/javascript" src="../_static/blockpy/imported.js"></script>
    <script type="text/javascript" src="../_static/blockpy/blocks/class.js"></script>
    <script type="text/javascript" src="../_static/blockpy/blocks/comment.js"></script>
    <script type="text/javascript" src="../_static/blockpy/blocks/comprehensions.js"></script>
    <script type="text/javascript" src="../_static/blockpy/blocks/dict.js"></script>
    <script type="text/javascript" src="../_static/blockpy/blocks/if.js"></script>
    <script type="text/javascript" src="../_static/blockpy/blocks/io.js"></script>
    <script type="text/javascript" src="../_static/blockpy/blocks/lists.js"></script>
    <script type="text/javascript" src="../_static/blockpy/blocks/sets.js"></script>
    <script type="text/javascript" src="../_static/blockpy/blocks/loops.js"></script>
    <script type="text/javascript" src="../_static/blockpy/blocks/parking.js"></script>
    <script type="text/javascript" src="../_static/blockpy/blocks/tuple.js"></script>
    <script type="text/javascript" src="../_static/blockpy/blocks/turtles.js"></script>
    <script type="text/javascript" src="../_static/blockpy/blocks/text.js"></script>
    <script type="text/javascript" src="../_static/blockpy-modal.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../_static/jquery-ui-1.10.3.custom.min.js"></script>
    <script type="text/javascript" src="../_static/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-4.0.0-dist/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-4.0.0-dist/js/bootstrap.bundle.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <script type="text/javascript" src="../_static/waypoints.min.js"></script>
    <script type="text/javascript" src="../_static/rangy-core.js"></script>
    <script type="text/javascript" src="../_static/rangy-textrange.js"></script>
    <script type="text/javascript" src="../_static/rangy-cssclassapplier.js"></script>
    <script type="text/javascript" src="../_static/user-highlights.js"></script>
    <script type="text/javascript" src="../_static/jquery.idle-timer.js"></script>
    <script type="text/javascript" src="../_static/processing-1.4.1.min.js"></script>
    <script type="text/javascript" src="../_static/jquery.hotkey.js"></script>
    <script type="text/javascript" src="../_static/jquery-migrate-1.2.1.min.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Допълнителни инструкции към функция" href="01_Karel_10_functions_params.html" />
    <link rel="prev" title="If оператор – упражнения" href="01_Karel_08_if_practice.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />
<link rel="shortcut icon" href="../_static/favicon.ico" type="image/ico" />

<script type="text/javascript">
  eBookConfig = {};
  eBookConfig.host = 'http://127.0.0.1:8000' ? 'http://127.0.0.1:8000' : 'http://127.0.0.1:8000';
  eBookConfig.app = eBookConfig.host+'/runestone';
  eBookConfig.ajaxURL = eBookConfig.app+'/ajax/';
  eBookConfig.course = 'TxtProgInPython';
  eBookConfig.logLevel = 0;
  eBookConfig.loginRequired = false;
  eBookConfig.build_info = "";
  eBookConfig.isLoggedIn = false;
  eBookConfig.useRunestoneServices = false;
  eBookConfig.python3 = true;
  eBookConfig.basecourse = 'TxtProgInPython';
  eBookConfig.runestone_version = '3.1.1';
  eBookConfig.imagesDir = '../_images/';
  eBookConfig.staticDir = '../_static/';
  if(typeof(Sk) != "undefined")
      Sk.imgPath = eBookConfig.imagesDir;
</script>

<div id="fb-root"></div>



  </head><body>


<!-- Begin navbar -->

<nav id="navbar" class="navbar navbar-default navbar-fixed-top" role="navigation">

  <div class="container">

    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
     <img src="../_static/img/logo.png" style="width:80px; height: 80px;"> 
    </div>

    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1" style="margin-top: 10px; margin-left: 25px;">
      <ul class="nav navbar-nav">
        <li class="active"><a href="../">Textual Programming in Python</a></li>
      </ul>
    </div>
  </div>
</nav>
<br/>


<div class="container col-md-12" id="continue-reading"></div>

<div class="container col-md-8 col-md-offset-2" id="main-content">
  
  <div class="section" id="id1">
<h1>Създайте серия от оператори<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h1>
<p>Нека си припомним задачата Вземете топката на съседното поле. Задачата беше, че във всяка посока Карел трябваше да се опита да отиде до съседното поле и (ако можеше да отиде до съседния площад), за да опита да вземе топката там. За да улесним пробването на следващата посока, избрахме да връщаме Карел на началния квадрат след всеки опит.</p>
<p>Една програма, която решава тази задача, е:</p>

<div data-childcomponent="Karel_functions__take_neighboring_ball_1" class="course-box course-box-problem course-content">

<textarea data-component="activecode" id=Karel_functions__take_neighboring_ball_1 data-lang="python" 
      data-timelimit=25000  data-codelens="true"  
    data-audio=''   
             data-passivecode="true"  data-hidehistory=true
       >
from karel import *
for i in range(4):   # in each of the 4 directions
    if front_is_clear(): # search the square in that direction
        move()
        if is_ball_on_square():
            pick_ball()
        turn_left()          # come back to the starting square
        turn_left()
        move()
        turn_left()          # turn towards the square you just tried
        turn_left()
    turn_left()          # next direction
</textarea>
</div>
<p>TЧастта от програмата от седмия до единадесетия ред изглежда малко по-трудна за следване. В тази част може да се наложи да си представите какво ще направи Карел, за да разберете напълно какво се случва там.</p>
<p>Коментарите донякъде помагат за по-лесното разбиране на тази част от програмата. В допълнение към коментарите, ще бъде още по-добре, ако има функция back(), която ще премести Карел крачка назад. Тогава програмата ще бъде по-кратка и по-разбираема:</p>

<div data-childcomponent="Karel_functions__take_neighboring_ball_2" class="course-box course-box-problem course-content">

<textarea data-component="activecode" id=Karel_functions__take_neighboring_ball_2 data-lang="python" 
      data-timelimit=25000  data-codelens="true"  
    data-audio=''   
             data-passivecode="true"  data-hidehistory=true
       >
from karel import *
for i in range(4):          # in each of the 4 directions
    if front_is_clear():       # seek a free square in that direction
        move()
        if is_ball_on_square():
            pick_ball()
        back()                     # come back to starting square
    turn_left()                # next direction
</textarea>
</div>
<p>Функцията back () не е част от библиотеката на Karel, но много лесно можем сами да напишем тази функция. Когато приключите, ще можем да използваме функцията back () еднакво с другите функции на библиотеката Karel, като например move () или turn_right ().</p>
<div class="section" id="id2">
<h2>Как се пишат функции<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<p>Засега ще научим само най-простия начин за писане на функция в Python, а други, по-сложни форми ще видим по-късно.</p>

<div data-childcomponent="Karel_functions__function_def" class="course-box course-box-problem course-content">

<textarea data-component="activecode" id=Karel_functions__function_def data-lang="python" 
      data-timelimit=25000  data-codelens="true"  
    data-audio=''   
             data-passivecode="true"  data-hidehistory=true
       >
def function_name():
    statement_1
    ...
    statement_k
</textarea>
</div>

    <div class="course-box course-box-info">
        <div class="course-content">
            <p>
<p>WКогато пишете някоя функция в Python, думата def в началото, скобите () и двоеточие: в края на първия ред са задължителни. За име на функция можем да използваме всяко правилно написано име, което сме избрали. Следващите оператори се пишат по-навътре и те формират тялото на функцията (ако повече от една команда е написана на ред, тогава тези команди са разделени с точка и запетая;). Операторите във функционалното тяло ще се изпълняват всеки път, когато името на функцията се срещне при изпълнение на програмата, тоест когато се извиква тази функция.</p>

    </p></div></div>
<p>В съответствие с тези правила, функцията back () може да бъде написана, както следва:</p>

<div data-childcomponent="Karel_functions__backwards_def" class="course-box course-box-problem course-content">

<textarea data-component="activecode" id=Karel_functions__backwards_def data-lang="python" 
      data-timelimit=25000  data-codelens="true"  
    data-audio=''   
             data-passivecode="true"  data-hidehistory=true
       >
def back():
    turn_left(); turn_left()
    move()
    turn_left(); turn_left()
</textarea>
</div>
<p>Тогава цялата програма ще изглежда така:</p>

<div data-childcomponent="Karel_functions__take_neighboring_ball_final" class="karel_section course-box course-box-problem">
    <div class="course-content">
        <p>

    <div data-component="karel" id="Karel_functions__take_neighboring_ball_final" class="karel_section">
        <div class="karel_actions col-md-12 mb-2"><button class="btn btn-success run-button">Покрени програм</button>
        <button class="btn btn-default reset-button">Врати на почетак</button>
        <button class="btn btn-default blockly-button" style="display: inline-block;">Blockly</button></div>
        <div style="overflow: hidden;" class="karel_actions col-md-12" >
            <section class="col-md-12">
                <article>
                    <textarea class="codeArea" id="Karel_functions__take_neighboring_ball_final" name="code" rows="10" style="width: 100%;height:300px"></textarea>
                    <textarea class="configArea" style="display:none"><!--x {
   setup:function() {
      function random(n) {
         return Math.floor(n * Math.random());
      }

      var ww = [
         [
            '█████',
            '█0.0█',
            '███.█',
            '█1.N█',
            '███.█',
            '█0.0█',
            '█████'
         ],
         [
            '█████',
            '█1.0█',
            '█...█',
            '█E.0█',
            '█████'
         ],
         [
            '███████',
            '█0█0█0█',
            '█.█.█.█',
            '█0.W.0█',
            '█.█.█.█',
            '█0█1█0█',
            '███████'
         ]
      ];
      let choice = random(ww.length);
      var w = ww[choice];
      var ny = Math.floor(w.length / 2);
      var nx = Math.floor(w[0].length / 2);
      var world = new World(nx, ny);

      for (let y = 1; y &lt;= ny; y++) {
         let wy = 2*(ny-y) + 1;
         for (let x = 1; x &lt;= nx; x++) {
            let wx = 2*x - 1;
            if (y &lt; ny && w[wy - 1].charAt(wx) == "█") world.addEWWall(x, y, 1);
            if (x &lt; nx && w[wy].charAt(wx + 1) == "█") world.addNSWall(x, y, 1);
            let c = w[wy].charAt(wx);
            let pos = "SWEN".indexOf(c);
            if (pos > -1) {
               world.setRobotStartAvenue(x);
               world.setRobotStartStreet(y);
               world.setRobotStartDirection("SWEN".charAt(pos));
            }
            let d = w[wy].charCodeAt(wx);
            if (d >= 48 && d &lt; 58) world.putBalls(x, y, d - 48);
         }
      }

      var robot = new Robot();

      var code = ["from karel import *",
                  "def back():",
                  "    turn_left(); turn_left()",
                  "    move()",
                  "    turn_left(); turn_left()",
                  "",
                  "for i in range(4):",
                  "    if front_is_clear():",
                  "        move()",
                  "        if is_ball_on_square():",
                  "            pick_ball()",
                  "        back()",
                  "    turn_left()  # next direction",
                  ""];

      return {robot:robot, world:world, code:code};
   },

   isSuccess: function(robot, world) {
      return robot.getBalls() > 0;
   }
} x--></textarea>
                </article>
            </section>
            <section class="col-md-12">
                <article>
                    <canvas class="world" style="border-style: solid; border-width: 2px; border-color: inherit; background: white;" width="300" height="300">
                        <p>Please try loading this page in HTML5 enabled web browsers. All the latest versions of famous browsers such as Internet explorer, Chrome, Firefox, Opera support HTML5.</p>
                    </canvas>
                </article>
            </section>
        </div>
    </div>
    <p class="karel_caption karel_caption_text"> (Karel_functions__take_neighboring_ball_final)</p>
</p></div></div>


    <div class="course-box course-box-info">
        <div class="course-content">
            <p>
<p>Когато извлечем някои оператори (които имат значение като група) във функция, можем да напишем програми, които са по-кратки и ясни, защото сме разделили проблема на по-малко сложни части.</p>
<p>Друго предимство на функциите за писане е, че лесно можем да ги използваме в други програми (тук понякога ще копираме предварително написани функции, но в реалното програмиране има по-добър и по-прост начин за повторно използване на веднъж написани функции).</p>

    </p></div></div>
</div>
<div class="section" id="id3">
<h2>Излизане от функцията или цикъла преди края<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h2>
<p>В задачата да търсим топката на съседно поле, в името на простотата на програмата, решихме, че дори когато Карел намери топка, той продължава да търси в останалите посоки. Има начин да се избегне това ненужно изпълнение на останалите оператори.</p>

    <div class="course-box course-box-info">
        <div class="course-content">
            <p>
<p>Когато искаме да прекъснем изпълнението на цикъла, пишем специален оператор break за прекъсване. Ефектът е да изскочите от цикъла и да продължите изпълнението на програмата от първия оператор след цикъла.</p>
<p>Използвайки break, ще изскочим от най-близкия (най-тесен) for или while цикъл, съдържащ декларацията за почивка. Ако операторът за прекъсване е разположен в две или повече вложени цикли, изпълнението продължава с оператора, който следва най-вътрешния (най-тесен) цикъл.</p>

    </p></div></div>
<p>Използвайки break, бихме могли да модифицираме основната част на програмата:</p>

<div data-childcomponent="Karel_functions__break_intro_1" class="course-box course-box-problem course-content">

<textarea data-component="activecode" id=Karel_functions__break_intro_1 data-lang="python" 
      data-timelimit=25000  data-codelens="true"  
    data-audio=''   
             data-passivecode="true"  data-hidehistory=true
       >
for i in range(4):
    if front_is_clear():
        move()
        if is_ball_on_square():
            pick_ball()
        back()
    turn_left()  # next direction
</textarea>
</div>
<p>във:</p>

<div data-childcomponent="Karel_functions__break_intro_2" class="course-box course-box-problem course-content">

<textarea data-component="activecode" id=Karel_functions__break_intro_2 data-lang="python" 
      data-timelimit=25000  data-codelens="true"  
    data-audio=''   
             data-passivecode="true"  data-hidehistory=true
       >
for i in range(4):
    if front_is_clear():
        move()
        if is_ball_on_square():
            pick_ball()
            break
        back()
    turn_left()  # next direction
</textarea>
</div>
<p>По този начин цикълът завършва веднага щом топката бъде намерена и взета. Тъй като няма други операции след този цикъл, в този случай чрез изпълнение на break, работата на програмата завършва.</p>
<hr class="docutils" />
<p>Подобно на излизането от цикъла, ние също можем да излезем от функцията, преди да се изпълнят всички нейни оператори.</p>

    <div class="course-box course-box-info">
        <div class="course-content">
            <p>
<p>Когато искаме да прекъснем изпълнението на функция, пишем специален оператор return. Ефектът на оператора return е да излезете от функцията и да продължите изпълнението на програмата от първият оператор след мястото, от което е извикана функцията.</p>
<p>С return излизаме от функцията, без значение колко цикъла има около оператора за връщане вътре във функцията.</p>

    </p></div></div>
<p>Можем да превърнем програмата за вземане на топката от съседното поле във функция. В този случай можем да напишем:</p>

<div data-childcomponent="Karel_functions__return_intro" class="course-box course-box-problem course-content">

<textarea data-component="activecode" id=Karel_functions__return_intro data-lang="python" 
      data-timelimit=25000  data-codelens="true"  
    data-audio=''   
             data-passivecode="true"  data-hidehistory=true
       >
def take_at_neighboring_square():
    for i in range(4):
        if front_is_clear():
            move()
            if is_ball_on_square():
                pick_ball()
                return # exit the function
            back()
        turn_left()  # next direction

take_at_neighboring_square()
</textarea>
</div>
</div>
<div class="section" id="id4">
<h2>Задачи за упражнение<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id5">
<h3>Оставяйте топките, докато има, както топки, така и квадратчета<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>

    <div class="course-box course-box-special">
        <div class="course-content">
            <h4 class="carbox-title">
                <img class="corner-image float-right" src="../_static/img/question-mark.png" />
            </h4>
            <p>
<p>Първоначално Карел има няколко топки и трябва да ги подреди по пътеката по една за всяко поле (започвайки от това, на което стои), доколкото е възможно. Карел спира да поставя топки, когато удари препятствие или когато му свършат топките (каето се случи първо). Няма значение дали Карел ще спре на последния запълнен квадрат или на първия празен квадрат.</p>

    </p></div></div>
<p>Съвет: Поставете едно от тези две условия в while цикъл, така цикълът приключва, когато условието вече не е изпълнено. Освен това, използвайте оператора break за излизане от цикъла, ако другото условие не е изпълнено.</p>

<div data-childcomponent="Karel_functions__put_balls_until_wall_or_no_more_balls" class="karel_section course-box course-box-problem">
    <div class="course-content">
        <p>

    <div data-component="karel" id="Karel_functions__put_balls_until_wall_or_no_more_balls" class="karel_section">
        <div class="karel_actions col-md-12 mb-2"><button class="btn btn-success run-button">Покрени програм</button>
        <button class="btn btn-default reset-button">Врати на почетак</button>
        <button class="btn btn-default blockly-button" style="display: inline-block;">Blockly</button></div>
        <div style="overflow: hidden;" class="karel_actions col-md-12" >
            <section class="col-md-12">
                <article>
                    <textarea class="codeArea" id="Karel_functions__put_balls_until_wall_or_no_more_balls" name="code" rows="10" style="width: 100%;height:300px"></textarea>
                    <textarea class="configArea" style="display:none"><!--x  {
     setup:function() {
         function random(n) {
             return Math.floor(n * Math.random());
         }
         var choice = random(3); // need initial world to get rid of 'choice'
         var N = [3, 4, 5];
         var world = new World(N[choice], 1);
         world.setRobotStartAvenue(1);
         world.setRobotStartStreet(1);
         world.setRobotStartDirection("E");

         var robot = new Robot();
         if (choice == 0) robot.setBalls(3);
         if (choice == 1) robot.setBalls(6);
         if (choice == 2) robot.setBalls(2);

         var code = ["from karel import *",
                     " # write the program",
                     ""];

         //var code = ["from karel import *",
         //            "while any_balls_with_karel():",
         //            "    drop_ball()",
         //            "    if not front_is_clear():",
         //            "        break",
         //            "    move()",
         //            ""];

         return {robot:robot, world:world, code:code};
     },

     isSuccess: function(robot, world) {
         var X = world.getAvenues();
         var zeroBallsFound = false;
         for (var x = 1; x &lt;= X; x++) {
             var b = world.getBalls(x, 1);
             if (b > 1) return false;
             if (b == 1 && zeroBallsFound) return false;
             if (b == 0) zeroBallsFound = true;
         }

        if (robot.getBalls() > 0 && zeroBallsFound)
            return false;

        return true;
     },
 } x--></textarea>
                </article>
            </section>
            <section class="col-md-12">
                <article>
                    <canvas class="world" style="border-style: solid; border-width: 2px; border-color: inherit; background: white;" width="300" height="300">
                        <p>Please try loading this page in HTML5 enabled web browsers. All the latest versions of famous browsers such as Internet explorer, Chrome, Firefox, Opera support HTML5.</p>
                    </canvas>
                </article>
            </section>
        </div>
    </div>
    <p class="karel_caption karel_caption_text"> (Karel_functions__put_balls_until_wall_or_no_more_balls)</p>
</p></div></div>

</div>
<div class="section" id="id6">
<h3>Преместете всички топки един квадрат назад<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h3>

    <div class="course-box course-box-special">
        <div class="course-content">
            <h4 class="carbox-title">
                <img class="corner-image float-right" src="../_static/img/question-mark.png" />
            </h4>
            <p>
<p>Пред Карел има пътека с неизвестна дължина. В стартовия квадрат няма топки. Карел трябва да измести всяка топка по един квадрат на запад.</p>

    </p></div></div>
<p>Можете да разрешите тази задача, като повторите следните стъпки, стига да има квадратчета пред Карел:</p>
<ul class="simple">
<li><p>отидете на следващия квадрат</p></li>
<li><p>вземете всички топчета от този квадрат</p></li>
<li><p>отидете крачка назад (тоест, обърнете се и отидете една стъпка напред)</p></li>
<li><p>пуснете всички топчета</p></li>
<li><p>върнете се на квадрата, от който сте взели топките</p></li>
</ul>
<p>По този начин можете да използвате написаната по-рано функцията, която разгледахме по-рано, за да се върнете към квадрата, към който Карел движи топките. Просто трябва да го копирате (или да го въведете отново) в областта за вашето решение.</p>

<div data-childcomponent="Karel_functions__all_balls_one_square_back" class="karel_section course-box course-box-problem">
    <div class="course-content">
        <p>

    <div data-component="karel" id="Karel_functions__all_balls_one_square_back" class="karel_section">
        <div class="karel_actions col-md-12 mb-2"><button class="btn btn-success run-button">Покрени програм</button>
        <button class="btn btn-default reset-button">Врати на почетак</button>
        <button class="btn btn-default blockly-button" style="display: inline-block;">Blockly</button></div>
        <div style="overflow: hidden;" class="karel_actions col-md-12" >
            <section class="col-md-12">
                <article>
                    <textarea class="codeArea" id="Karel_functions__all_balls_one_square_back" name="code" rows="10" style="width: 100%;height:300px"></textarea>
                    <textarea class="configArea" style="display:none"><!--x  {
     setup:function() {
        function random(n) {
           return Math.floor(n * Math.random());
        }
        var choice = random(3); // need initial world to get rid of 'choice'
        var N = [3, 4, 5];
        var world = new World(N[choice], 1);
        world.setRobotStartAvenue(1);
        world.setRobotStartStreet(1);
        world.setRobotStartDirection("E");

        var B = 0;
        if (Math.random() > 0.8) B = random(3);
        if (choice == 0) {
           world.putBalls(2, 1, B);
           world.putBalls(3, 1, B + 2);
        }
        if (choice == 1) {
           world.putBalls(2, 1, B);
           world.putBalls(3, 1, B + 3);
           world.putBalls(4, 1, B + 1);
        }
        if (choice == 2) {
           world.putBalls(2, 1, B);
           world.putBalls(3, 1, B + 2);
           world.putBalls(4, 1, B + 1);
           world.putBalls(5, 1, B + 0);
        }

        var robot = new Robot();

        var code = ["from karel import *",
                    "",
                    "# copy the function 'back()'",
                    "",
                    "while front_is_clear():  # while there are squares in fornt of Karel, repeat",
                    "    move();                  # go forward",
                    "    # complete the line      # pick up all the balls from this square",
                    "    # complete the line      # go one step back",
                    "    # complete the line      # drop all the balls",
                    "    # complete the line      # go forward once more to the emptied square",
                    ""];

        return {robot:robot, world:world, code:code};
     },

     isSuccess: function(robot, world) {
        var N = world.getAvenues();
        var B = world.getBalls(1, 1);
        if (N == 3) {
           if (world.getBalls(2, 1) != B + 2)
             return false;
        }
        if (N == 4) {
           if (world.getBalls(2, 1) != B + 3)
             return false;
           if (world.getBalls(3, 1) != B + 1)
             return false;
        }
        if (N == 5) {
           if (world.getBalls(2, 1) != B + 2)
             return false;
           if (world.getBalls(3, 1) != B + 1)
             return false;
           if (world.getBalls(4, 1) != B + 0)
             return false;
        }

        if (world.getBalls(N, 1) != 0)
           return false;

        if (robot.getBalls() > 0)
              return false;

        return true;
     },
 } x--></textarea>
                </article>
            </section>
            <section class="col-md-12">
                <article>
                    <canvas class="world" style="border-style: solid; border-width: 2px; border-color: inherit; background: white;" width="300" height="300">
                        <p>Please try loading this page in HTML5 enabled web browsers. All the latest versions of famous browsers such as Internet explorer, Chrome, Firefox, Opera support HTML5.</p>
                    </canvas>
                </article>
            </section>
        </div>
    </div>
    <p class="karel_caption karel_caption_text"> (Karel_functions__all_balls_one_square_back)</p>
</p></div></div>


    <div data-component="reveal" id="Karel_functions__all_balls_one_square_back_reveal"   data-showtitle="Solution" data-hidetitle="Hide solution">
    
<div data-childcomponent="Karel_functions__all_balls_one_square_back_solution" class="course-box course-box-problem course-content">

<textarea data-component="activecode" id=Karel_functions__all_balls_one_square_back_solution data-lang="python" 
      data-timelimit=25000  data-codelens="true"  
    data-audio=''   
             data-passivecode="true"  data-hidehistory=true
       >
from karel import *
def back():      # go one step back, and maintain the same orientation
    turn_left(); turn_left();
    move();
    turn_left(); turn_left();

while front_is_clear():       # while there are squares in fornt of Karel, repeat
    move();                       # go to a new square
    while is_ball_on_square():    # take all the balls from this square
        pick_ball()
    back()                        # step back
    while any_balls_with_karel(): # drop all the balls
        drop_ball()
    move()                        # go to the emptied square
</textarea>
</div>

    </div>
    </div>
<div class="section" id="id7">
<h3>Следвайте топките<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h3>

    <div class="course-box course-box-special">
        <div class="course-content">
            <h4 class="carbox-title">
                <img class="corner-image float-right" src="../_static/img/question-mark.png" />
            </h4>
            <p>
<p>Всеки квадрат съдържа една топка или нито една. Квадратите с топките върху тях образуват пътека, която започва на площада до Карел. Карел трябва да следва този път и да вземе всички топки.</p>

    </p></div></div>
<p>Съвет: За да решите тази задача, можете да напишете функцията go_to_neighboring_nonempty_square (), която трябва само да премести Karell до съседния квадрат, който има топка върху него (return би бил полезен там). Функцията go_to_neighboring_nonempty_square () трябва да се различава от написаната по-рано функция take_at_neighboring_square () само в смисъл, че не взема топката.</p>
<p>Когато Карел събере всички топки, следващият призив на тази функция ще го постави на празен квадрат (между другото, това ще бъде квадратът, където Карел взе последната топка). Когато на площада, на който е Карел, няма топка, това ще означава, че Карел вече е взел всички топчета.</p>

<div data-childcomponent="Karel_functions__follow_the_balls" class="karel_section course-box course-box-problem">
    <div class="course-content">
        <p>

    <div data-component="karel" id="Karel_functions__follow_the_balls" class="karel_section">
        <div class="karel_actions col-md-12 mb-2"><button class="btn btn-success run-button">Покрени програм</button>
        <button class="btn btn-default reset-button">Врати на почетак</button>
        <button class="btn btn-default blockly-button" style="display: inline-block;">Blockly</button></div>
        <div style="overflow: hidden;" class="karel_actions col-md-12" >
            <section class="col-md-12">
                <article>
                    <textarea class="codeArea" id="Karel_functions__follow_the_balls" name="code" rows="10" style="width: 100%;height:300px"></textarea>
                    <textarea class="configArea" style="display:none"><!--x  {
     setup:function() {
         function random(n) {
             return Math.floor(n * Math.random());
         }

         var ww = [
             [
                '███████████',
                '█0.0.1.1.0█',
                '█.........█',
                '█0.N.0.1.0█',
                '█.........█',
                '█0.1.1.1.0█',
                '███████████'
             ],
             [
                '███████████',
                '█1.1.1.1.1█',
                '█.........█',
                '█1.0.0.0.1█',
                '██........█',
                '█S.1.1.1.1█',
                '███████████'
             ]
         ];
         let choice = random(ww.length);
         var w = ww[choice];
         var ny = Math.floor(w.length / 2);
         var nx = Math.floor(w[0].length / 2);
         var world = new World(nx, ny);

         for (let y = 1; y &lt;= ny; y++) {
             let wy = 2*(ny-y) + 1;
             for (let x = 1; x &lt;= nx; x++) {
                 let wx = 2*x - 1;
                 if (y &lt; ny && w[wy - 1].charAt(wx) == "█") world.addEWWall(x, y, 1);
                 if (x &lt; nx && w[wy].charAt(wx + 1) == "█") world.addNSWall(x, y, 1);
                 let c = w[wy].charAt(wx);
                 let pos = "SWEN".indexOf(c);
                 if (pos > -1) {
                     world.setRobotStartAvenue(x);
                     world.setRobotStartStreet(y);
                     world.setRobotStartDirection("SWEN".charAt(pos));
                 }
                 let d = w[wy].charCodeAt(wx);
                 if (d >= 48 && d &lt; 58) world.putBalls(x, y, d - 48);
             }
         }

         var robot = new Robot();

         var code = ["from karel import *",
                     "def back():",
                     "    turn_left(); turn_left()",
                     "    move()",
                     "    turn_left(); turn_left()",
                     "",
                     "def go_to_neighboring_nonempty_square():",
                     "    # write the function",
                     "",
                     "go_to_neighboring_nonempty_square()",
                     "while ??? # add the condition",
                     "    pick_ball()",
                     "    ??? # complete the program",
                     ""];

         //var code = ["from karel import *",
         //            "def back():",
         //            "    turn_left(); turn_left()",
         //            "    move()",
         //            "    turn_left(); turn_left()",
         //            "",
         //            "def go_to_neighboring_nonempty_square():",
         //            "    for i in range(4):",
         //            "        if front_is_clear():",
         //            "            move()",
         //            "            if is_ball_on_square():",
         //            "                return",
         //            "            back()",
         //            "        turn_left()  # next direction",
         //            "",
         //            "go_to_neighboring_nonempty_square()",
         //            "while is_ball_on_square():",
         //            "    pick_ball()",
         //            "    go_to_neighboring_nonempty_square()",
         //            ""];

         return {robot:robot, world:world, code:code};
     },

     isSuccess: function(robot, world) {
         var X = world.getAvenues();
         var Y = world.getStreets();
         for (var y = 1; y &lt;= Y; y++)
             for (var x = 1; x &lt;= X; x++)
                 if (world.getBalls(x, y) > 0)
                     return false;

         return true;
     },
 } x--></textarea>
                </article>
            </section>
            <section class="col-md-12">
                <article>
                    <canvas class="world" style="border-style: solid; border-width: 2px; border-color: inherit; background: white;" width="300" height="300">
                        <p>Please try loading this page in HTML5 enabled web browsers. All the latest versions of famous browsers such as Internet explorer, Chrome, Firefox, Opera support HTML5.</p>
                    </canvas>
                </article>
            </section>
        </div>
    </div>
    <p class="karel_caption karel_caption_text"> (Karel_functions__follow_the_balls)</p>
</p></div></div>

</div>
<div class="section" id="id8">
<h3>Вземете всички топчета от цялата маса<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h3>

    <div class="course-box course-box-special">
        <div class="course-content">
            <h4 class="carbox-title">
                <img class="corner-image float-right" src="../_static/img/question-mark.png" />
            </h4>
            <p>
<p>Карел първоначално е обърнат на север (нагоре) и е разположен в долния ляв ъгъл на правоъгълна маса с неизвестни размери, без вътрешни стени. На всеки квадрат може да има произволен брой топки. Карел трябва да вземе всички топчета от всички квадратчета на дъската.</p>

    </p></div></div>
<p>Съвет: Напишете функция <em>empty_one_row()</em>, която кара Karel да:</p>
<ul class="simple">
<li><p>завийте наляво (на изток), като погледнете по реда, в който се намира</p></li>
<li><p>преминете през целия ред и вземете всички топки от всеки квадрат в този ред, включително квадрата, на който е започнал</p></li>
<li><p>обърнете се към началото на реда (т.е. на запад)</p></li>
<li><p>върнете се в началото на реда и завийте на север (нагоре), както той застана преди повикването на функцията</p></li>
</ul>
<p>Програмата, която решава задачата с помощта на тази функция, не е дълга. Трябва да направи следното:</p>
<ul class="simple">
<li><p>изпразнете първия ред</p></li>
<li><p>докато има редове пред Карел, отидете на следващия и го изпразнете</p></li>
</ul>

<div data-childcomponent="Karel_functions_take_all_balls_2D" class="karel_section course-box course-box-problem">
    <div class="course-content">
        <p>

    <div data-component="karel" id="Karel_functions_take_all_balls_2D" class="karel_section">
        <div class="karel_actions col-md-12 mb-2"><button class="btn btn-success run-button">Покрени програм</button>
        <button class="btn btn-default reset-button">Врати на почетак</button>
        <button class="btn btn-default blockly-button" style="display: inline-block;">Blockly</button></div>
        <div style="overflow: hidden;" class="karel_actions col-md-12" >
            <section class="col-md-12">
                <article>
                    <textarea class="codeArea" id="Karel_functions_take_all_balls_2D" name="code" rows="10" style="width: 100%;height:300px"></textarea>
                    <textarea class="configArea" style="display:none"><!--x {
   setup:function() {
      function random(n) {
         return Math.floor(n * Math.random());
      }

      var sizes = [1, 2, 3, 3, 4, 4, 4];
      var numBalls = [0, 0, 1, 1, 1, 3];
      var X = sizes[random(sizes.length)];
      var Y = sizes[random(sizes.length)];
      var world = new World(X, Y);
      world.setRobotStartAvenue(1);
      world.setRobotStartStreet(1);
      world.setRobotStartDirection("N");

      for (var col = 1; col &lt;= X; col++) {
          for (var row = 1; row &lt;= Y; row++) {
              let B = numBalls[random(numBalls.length)];
              world.putBalls(col, row, B);
          }
      }

      var robot = new Robot();

      var code = ["from karel import *",
                  "# write the program",
                  ""];
     //var code = ["from karel import *
     //            "def empty_one_row():",
     //            "    turn_right()                # turn towards end of the row (eastwards)",
     //            "    while is_ball_on_square():  # empty first square in the row",
     //            "        pick_ball()",
     //            "    while front_is_clear():     # while there are unvisited squares",
     //            "        move()                      # go to a new square",
     //            "        while is_ball_on_square():  # emtpy the new square",
     //            "            pick_ball()",
     //            "        ",
     //            "    turn_right(); turn_right()  # turn towards beginning of the row (westwards)",
     //            "    while front_is_clear():     # come back to the first square in that row",
     //            "        move()",
     //            "    turn_right()                # turn towards next row (northwards)",
     //            "",
     //            "empty_one_row()             # pick up the balls from the first row",
     //            "while front_is_clear():     # while there are new rows",
     //            "    move(); empty_one_row()     # go to the next row and empty it",
     //            ""];

      return {robot:robot, world:world, code:code};
     },

     isSuccess: function(robot, world) {
        var X = world.getAvenues();
        var Y = world.getStreets();
        for (var col = 1; col &lt;= X; col++) {
           for (var row = 1; row &lt;= Y; row++) {
              if (world.getBalls(col, row) > 0)
                 return false;
           }
        }

        return true;
   },
} x--></textarea>
                </article>
            </section>
            <section class="col-md-12">
                <article>
                    <canvas class="world" style="border-style: solid; border-width: 2px; border-color: inherit; background: white;" width="300" height="300">
                        <p>Please try loading this page in HTML5 enabled web browsers. All the latest versions of famous browsers such as Internet explorer, Chrome, Firefox, Opera support HTML5.</p>
                    </canvas>
                </article>
            </section>
        </div>
    </div>
    <p class="karel_caption karel_caption_text"> (Karel_functions_take_all_balls_2D)</p>
</p></div></div>

</div>
</div>
</div>


  
      <div class="col-md-12">
<ul class="pager">
        <li id="relations-prev" title='Previous chapter - If оператор – упражнения' data-toggle="tooltip"><a href="01_Karel_08_if_practice.html">Previous chapter</a></li>
    
        <li id="relations-next" title='Next chapter - Допълнителни инструкции към функция' data-toggle="tooltip"><a href="01_Karel_10_functions_params.html">Next chapter</a></li>
</ul>

<!-- <ul class="pager"> -->
    <!-- -->
        <!-- <li id="relations-prev" title='Претходно поглавље - If оператор – упражнения' data-toggle="tooltip"><a href="01_Karel_08_if_practice.html">Претходно поглавље</a></li> -->
    <!--  -->
    <!-- -->
        <!-- <li id="relations-next" title='Следеће поглавље - Допълнителни инструкции към функция' data-toggle="tooltip"><a href="01_Karel_10_functions_params.html">Следеће поглавље</a></li> -->
    <!-- -->
<!-- </ul> -->

<script type="text/javascript">

  $('#relations-prev').tooltip({'placement':'right', 'selector': '', 'delay': { show: 100, hide: 50}});
  $('#relations-next').tooltip({'placement':'left', 'selector': '', 'delay': { show: 100, hide: 50}});

</script>
</div>
  
</div>
<footer class="footer col-md-12">
    <div class="container text-center">
        <div class="text-center">
            <hr>
            <p class="text-muted">
                <span class="text-center">&copy; 2019 <a href="https://petlja.org">Petlja.org</a> 
                  <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="Creative Commons License" style="border-width:0; vertical-align: text-bottom" src="https://i.creativecommons.org/l/by-nc-sa/4.0/80x15.png" /></a>
                  (Created using  <a href="https://pypi.org/project/Sphinx/">Sphinx</a>, <a href="http://runestoneinteractive.org/">RunestoneComponents</a> and <a href="https://github.com/Petlja/PetljaDoc">PetljaDoc</a>)</span>
            </p>
        </div>
    </div>
</footer>



<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-32029811-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>



  </body>
</html>